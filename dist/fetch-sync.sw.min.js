!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fetchSync=t():e.fetchSync=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t,r){"use strict";function n(){h=!1}function o(e){if(!e)return void(l!==p&&(l=p,n()));if(e!==l){if(e.length!==p.length)throw new Error("Custom alphabet for shortid must be "+p.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,r){return t!==r.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+p.length+" unique characters. These characters were not unique: "+t.join(", "));l=e,n()}}function i(e){return o(e),l}function s(e){d.seed(e),f!==e&&(n(),f=e)}function a(){l||o(p);for(var e,t=l.split(""),r=[],n=d.nextValue();t.length>0;)n=d.nextValue(),e=Math.floor(n*t.length),r.push(t.splice(e,1)[0]);return r.join("")}function u(){return h||(h=a())}function c(e){return u()[e]}var l,f,h,d=r(12),p="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";e.exports={characters:i,seed:s,lookup:c,shuffled:u}},function(e,t,r){"use strict";function n(e,t){for(var r,n=0,i="";!r;)i+=e(t>>4*n&15|o()),r=t<Math.pow(16,n+1),n++;return i}var o=r(11);e.exports=n},function(e,t,r){"use strict";e.exports=r(9)},function(e,t,r){"use strict";function n(e,t){return new o(e,t)}function o(e,t){this.handlers=e,this.isClient=Boolean(t),this.isWorker=!this.isClient,this.open=a(),this.receiveHandlers=[],this.promises={},this.isClient?(this.open.resolve(),this.recipient=t,this.messageChannel=new c,this.messageChannel.port1.onmessage=this._handleMessage.bind(this),this.send(n.types.CONNECT)):u.onmessage=this._handleMessage.bind(this)}var i,s=r(2),a=r(6);try{var u=self,c=MessageChannel}catch(e){}n.worker=function(e){return n(e,null)},n.client=function(e,t,r){return u=r?{}:self,c=r||MessageChannel,n(t,e)},n.types={CONNECT:"@@MSGR/CONNECT",UNKNOWN:"@@MSGR/UNKNOWN",RESPONSE:"@@MSGR/RESPONSE"},o.prototype._handleMessage=function(e){try{var t=JSON.parse(e.data),r=t.id,o=t.type;if(!r||!o)throw new Error}catch(e){throw new Error("msgr: malformed message")}var i=function(e){this.send(n.types.RESPONSE,e,r)}.bind(this);if(this.isWorker&&t.data===n.types.CONNECT&&(this.recipient=e.ports[0],this.open.resolve()),t.type===n.types.UNKNOWN&&t.data in this.handlers)this.handlers[t.data](null,i);else if(t.type in this.handlers)this.handlers[t.type](t.data,i);else if(r&&r in this.promises){var s=this.promises[r];s.resolve(t.data),this.promises[r]=null}else this.receiveHandlers.forEach(function(e){e(t.data,i)})},o.prototype.ready=function(e){this.open.promise.then(e)},o.prototype.receive=function(e){if("function"!=typeof e)throw new Error("msgr: expecting handler to be a function");this.receiveHandlers.push(e)},o.prototype.send=function(e,t,r){var o=r||s.generate();t||(t=e,e!==n.types.RESPONSE&&(e=n.types.UNKNOWN));var i=a(),u=JSON.stringify({__msgr:!0,id:o,type:e,data:t}),c=[u];return this.isClient&&t===n.types.CONNECT&&c.push([this.messageChannel.port2]),this.open.promise.then(function(){this.recipient.postMessage.apply(this.recipient,c)}.bind(this)),this.promises[o]=i,i.promise};var l={client:n.client,worker:n.worker,types:n.types};void 0!==(i=function(){return l}.call(t,r,t,e))&&(e.exports=i)},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){return u.blobToArrayBuffer(e).then(function(e){return String.fromCharCode.apply(null,new Uint16Array(e))})}function o(e,t){return u.base64StringToBlob(e).then(function(e){switch(t){case c.ARRAY_BUFFER:return u.blobToArrayBuffer(e);case c.BLOB:return e;case c.FORM_DATA:throw new Error("Cannot make FormData from serialised Request");case c.JSON:return n(e).then(function(e){return JSON.parse(e)});case c.TEXT:return n(e);default:throw new Error('Unknown requested body type "'+t+'"')}})}function i(e,t){if(!(e instanceof Request))throw new Error("Expecting request to be instance of Request");for(var r=[],n=e.headers.keys(),o=0;o<n.length;o++){var i=n[o];r[i]=e.headers.get(i)}var s={method:e.method,url:e.url,headers:r,context:e.context,referrer:e.referrer,mode:e.mode,credentials:e.credentials,redirect:e.redirect,integrity:e.integrity,cache:e.cache,bodyUsed:e.bodyUsed};return e.blob().then(u.blobToBase64String).then(function(e){return s.__body=e,t?s:JSON.stringify(s)})}function s(e){var t,r;if("string"==typeof e)t=JSON.parse(e),r=t.url;else{if("object"!=typeof e)throw new Error("Expecting serialised request to be a string or object");t=e,r=t.url}const n=new Request(r,t),i={context:{enumerable:!0,value:t.context}},s=Object.keys(c).reduce(function(e,r){return e[l[r]]={enumerable:!0,value:function(){return n.bodyUsed?Promise.reject(new TypeError("Already used")):(n.bodyUsed=!0,Promise.resolve(o(t.__body,r)))}},e},i);return Object.defineProperties(n,s),n}var a,a,u=r(1),c={ARRAY_BUFFER:"ARRAY_BUFFER",BLOB:"BLOB",FORM_DATA:"FORM_DATA",JSON:"JSON",TEXT:"TEXT"},l={ARRAY_BUFFER:"arrayBuffer",BLOB:"blob",FORM_DATA:"formData",JSON:"json",TEXT:"text"};i.deserialise=s,i.deserialize=s,a=function(){return i}.call(t,r,t,e),void 0!==a&&(e.exports=a),void 0!==(a=function(){return i}.call(t,r,t,e))&&(e.exports=a)},function(e,t,r){"use strict";function n(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=-1;++o<t;)n[o]=e.charCodeAt(o);return r}function o(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=-1;++o<n;)t+=String.fromCharCode(r[o]);return t}function i(e,t){return new E(function(r,n){var o=new Image;t&&(o.crossOrigin=t),o.onload=function(){r(o)},o.onerror=n,o.src=e})}function s(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),t}function a(e,t){return t=t||{},"string"==typeof t&&(t={type:t}),new w(e,t)}function u(e){return(window.URL||window.webkitURL).createObjectURL(e)}function c(e){return(window.URL||window.webkitURL).revokeObjectURL(e)}function l(e){return new E(function(t,r){var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var r=e.target.result||"";return i?t(r):void t(o(r))},n.onerror=r,i?n.readAsBinaryString(e):n.readAsArrayBuffer(e)})}function f(e,t){return E.resolve().then(function(){var r=[n(atob(e))];return t?a(r,{type:t}):a(r)})}function h(e,t){return E.resolve().then(function(){return f(btoa(e),t)})}function d(e){return l(e).then(function(e){return btoa(e)})}function p(e){return E.resolve().then(function(){var t=e.match(/data:([^;]+)/)[1],r=e.replace(/^[^,]+,/,"");return a([n(atob(r))],{type:t})})}function v(e,t,r,n){return t=t||"image/png",i(e,r).then(function(e){return s(e)}).then(function(e){return e.toDataURL(t,n)})}function y(e,t,r){return E.resolve().then(function(){return"function"==typeof e.toBlob?new E(function(n){e.toBlob(n,t,r)}):p(e.toDataURL(t,r))})}function b(e,t,r,n){return t=t||"image/png",i(e,r).then(function(e){return s(e)}).then(function(e){return y(e,t,n)})}function m(e,t){return E.resolve().then(function(){return a([e],t)})}function g(e){return new E(function(t,r){var n=new FileReader;n.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},n.onerror=r,n.readAsArrayBuffer(e)})}var w=r(2),E=r(3);e.exports={createBlob:a,createObjectURL:u,revokeObjectURL:c,imgSrcToBlob:b,imgSrcToDataURL:v,canvasToBlob:y,dataURLToBlob:p,blobToBase64String:d,base64StringToBlob:f,binaryStringToBlob:h,blobToBinaryString:l,arrayBufferToBlob:m,blobToArrayBuffer:g}},function(e,t){(function(t){function r(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}function n(e,t){t=t||{};var n=new i;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function o(e,t){return r(e),new Blob(e,t||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),u=i&&i.prototype.append&&i.prototype.getBlob;e.exports=function(){return s?a?t.Blob:o:u?n:void 0}()}).call(t,function(){return this}())},function(e,t,r){(function(t){"function"==typeof t.Promise?e.exports=t.Promise:e.exports=r(4)}).call(t,function(){return this}())},function(e,t,r){var n,n;!function(t){e.exports=function(){return function e(t,r,o){function i(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof n&&n;if(!u&&c)return n(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r||e)},l,l.exports,e,t,r,o)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,r){"use strict";function n(){}t.exports=n},{}],2:[function(e,t,r){"use strict";var n=e("./promise"),o=e("./reject"),i=e("./resolve"),s=e("./INTERNAL"),a=e("./handlers"),u=o(new TypeError("must be an array"));t.exports=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return u;var t=e.length,r=!1;if(!t)return i([]);for(var o=new Array(t),c=0,l=-1,f=new n(s);++l<t;)!function(e,n){function s(e){o[n]=e,++c===t&!r&&(r=!0,a.resolve(f,o))}i(e).then(s,function(e){r||(r=!0,a.reject(f,e))})}(e[l],l);return f}},{"./INTERNAL":1,"./handlers":3,"./promise":5,"./reject":7,"./resolve":8}],3:[function(e,t,r){"use strict";function n(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e("./tryCatch"),i=e("./resolveThenable"),s=e("./states");r.resolve=function(e,t){var a=o(n,t);if("error"===a.status)return r.reject(e,a.value);var u=a.value;if(u)i.safely(e,u);else{e.state=s.FULFILLED,e.outcome=t;for(var c=-1,l=e.queue.length;++c<l;)e.queue[c].callFulfilled(t)}return e},r.reject=function(e,t){e.state=s.REJECTED,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e}},{"./resolveThenable":9,"./states":10,"./tryCatch":11}],4:[function(e,t,r){t.exports=r=e("./promise"),r.resolve=e("./resolve"),r.reject=e("./reject"),r.all=e("./all")},{"./all":2,"./promise":5,"./reject":7,"./resolve":8}],5:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);if("function"!=typeof e)throw new TypeError("reslover must be a function");this.state=a.PENDING,this.queue=[],this.outcome=void 0,e!==i&&s.safely(this,e)}var o=e("./unwrap"),i=e("./INTERNAL"),s=e("./resolveThenable"),a=e("./states"),u=e("./queueItem");t.exports=n,n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a.FULFILLED||"function"!=typeof t&&this.state===a.REJECTED)return this;var r=new n(i);if(this.state!==a.PENDING){var s=this.state===a.FULFILLED?e:t;o(r,s,this.outcome)}else this.queue.push(new u(r,e,t));return r}},{"./INTERNAL":1,"./queueItem":6,"./resolveThenable":9,"./states":10,"./unwrap":12}],6:[function(e,t,r){"use strict";function n(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}var o=e("./handlers"),i=e("./unwrap");t.exports=n,n.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){o.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{"./handlers":3,"./unwrap":12}],7:[function(e,t,r){"use strict";function n(e){var t=new o(i);return s.reject(t,e)}var o=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=n},{"./INTERNAL":1,"./handlers":3,"./promise":5}],8:[function(e,t,r){"use strict";function n(e){if(e)return e instanceof o?e:s.resolve(new o(i),e);switch(typeof e){case"boolean":return a;case"undefined":return c;case"object":return u;case"number":return l;case"string":return f}}var o=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=n;var a=s.resolve(new o(i),!1),u=s.resolve(new o(i),null),c=s.resolve(new o(i),void 0),l=s.resolve(new o(i),0),f=s.resolve(new o(i),"")},{"./INTERNAL":1,"./handlers":3,"./promise":5}],9:[function(e,t,r){"use strict";function n(e,t){function r(t){a||(a=!0,o.reject(e,t))}function n(t){a||(a=!0,o.resolve(e,t))}function s(){t(n,r)}var a=!1,u=i(s);"error"===u.status&&r(u.value)}var o=e("./handlers"),i=e("./tryCatch");r.safely=n},{"./handlers":3,"./tryCatch":11}],10:[function(e,t,r){r.REJECTED=["REJECTED"],r.FULFILLED=["FULFILLED"],r.PENDING=["PENDING"]},{}],11:[function(e,t,r){"use strict";function n(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=n},{}],12:[function(e,t,r){"use strict";function n(e,t,r){o(function(){var n;try{n=t(r)}catch(t){return i.reject(e,t)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}var o=e("immediate"),i=e("./handlers");t.exports=n},{"./handlers":3,immediate:13}],13:[function(e,t,r){"use strict";function n(){i=!0;for(var e,t,r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}i=!1}function o(e){1!==u.push(e)||i||s()}for(var i,s,a=[e("./nextTick"),e("./messageChannel"),e("./stateChange"),e("./timeout")],u=[],c=-1,l=a.length;++c<l;)if(a[c].test()){s=a[c].install(n);break}t.exports=o},{"./messageChannel":14,"./nextTick":15,"./stateChange":16,"./timeout":17}],14:[function(e,t,r){(function(e){"use strict";r.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},r.install=function(t){var r=new e.MessageChannel;return r.port1.onmessage=t,function(){r.port2.postMessage(0)}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,r){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;r.test=function(){return t},r.install=function(r){var n=0,o=new t(r),i=e.document.createTextNode("");return o.observe(i,{characterData:!0}),function(){i.data=n=++n%2}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,r){(function(e){"use strict";r.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},r.install=function(t){return function(){var r=e.document.createElement("script");return r.onreadystatechange=function(){t(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r),t}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t,r){"use strict";r.test=function(){return!0},r.install=function(e){return function(){setTimeout(e,0)}}},{}]},{},[4])(4)}()}()}])})},function(e,t,r){"use strict";function n(e){for(var t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);var s=new DataView(n);return new Blob([s.buffer],{type:r})}function o(e){if(!(e instanceof Response))throw new Error("Expecting response to be instance of Response");for(var t=[],r=e.headers.keys(),n=0;n<r.length;n++){var o=r[n];t[o]=e.headers.get(o)}return new Promise(function(r,n){var o=new FileReader;e.blob().then(function(e){return o.readAsDataURL(e)}),o.onerror=n,o.onloadend=function(){r(JSON.stringify({type:e.type,url:e.url,useFinalURL:e.useFinalURL,status:e.status,ok:e.ok,statusText:e.statusText,headers:t,__body:o.result}))}})}function i(e){var t;if("string"==typeof e)t=JSON.parse(e);else{if("object"!=typeof e)throw new Error("Expecting serialised response to be a string or object");t=e}return new Response(n(t.__body))}var s,s;o.deserialise=i,o.deserialize=i,void 0!==(s=function(){return o}.call(t,r,t,e))&&(e.exports=s),void 0!==(s=function(){return o}.call(t,r,t,e))&&(e.exports=s)},function(e,t,r){"use strict";function n(){var e,t;return{promise:new Promise(function(r,n){e=r,t=n}),resolve:e,reject:t}}var o;void 0!==(o=function(){return n}.call(t,r,t,e))&&(e.exports=o)},function(e,t,r){"use strict";function n(e){var t="",r=Math.floor(.001*(Date.now()-u));return r===i?o++:(o=0,i=r),t+=s(a.lookup,c),t+=s(a.lookup,e),o>0&&(t+=s(a.lookup,o)),t+=s(a.lookup,r)}var o,i,s=r(1),a=r(0),u=1459707606518,c=6;e.exports=n},function(e,t,r){"use strict";function n(e){var t=o.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}}var o=r(0);e.exports=n},function(e,t,r){"use strict";function n(t){return a.seed(t),e.exports}function o(t){return f=t,e.exports}function i(e){return void 0!==e&&a.characters(e),a.shuffled()}function s(){return c(f)}var a=r(0),u=(r(1),r(8)),c=r(7),l=r(10),f=r(13)||0;e.exports=s,e.exports.generate=s,e.exports.seed=n,e.exports.worker=o,e.exports.characters=i,e.exports.decode=u,e.exports.isValid=l},function(e,t,r){"use strict";function n(e){if(!e||"string"!=typeof e||e.length<6)return!1;for(var t=o.characters(),r=e.length,n=0;n<r;n++)if(-1===t.indexOf(e[n]))return!1;return!0}var o=r(0);e.exports=n},function(e,t,r){"use strict";function n(){if(!o||!o.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return o.getRandomValues(e),48&e[0]}var o="object"==typeof window&&(window.crypto||window.msCrypto);e.exports=n},function(e,t,r){"use strict";function n(){return(i=(9301*i+49297)%233280)/233280}function o(e){i=e}var i=1;e.exports={nextValue:n,seed:o}},function(e,t,r){"use strict";e.exports=0},function(e,t,r){var n,o;/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
!function(i,s,a){"use strict";n=s,void 0!==(o="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(0,function(){"use strict";function e(e,t){var r,n;for(r in t)(n=t[r])!==a[r]&&n!==e[r]&&(e[r]=n);return e}function t(e){return"error"in e.target?"VersionError"==e.target.error.name:"errorCode"in e.target&&12==e.target.errorCode}var r=function(e){throw e},n=function(){},o={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:r,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},i=function(e,t){void 0===t&&"function"==typeof e&&(t=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={});for(var r in o)this[r]=void 0!==e[r]?e[r]:o[r];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,t&&(this.onStoreReady=t);var n="object"==typeof window?window:self,i=this.implementationPreference.filter(function(e){return e in n});this.implementation=i[0],this.idb=n[this.implementation],this.keyRange=n.IDBKeyRange||n.webkitIDBKeyRange||n.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},s={constructor:i,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),r=!1;e.onerror=function(e){if(t(e))this.onError(new Error("The version number provided is lower than the existing one."));else{var r;if(e.target.error)r=e.target.error;else{var n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(n+=" with error code "+e.target.errorCode),r=new Error(n)}this.onError(r)}}.bind(this),e.onsuccess=function(e){if(!r){if(this.db)return void this.onStoreReady();if(this.db=e.target.result,"string"==typeof this.db.version)return void this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));if(!this.db.objectStoreNames.contains(this.storeName))return void this.onError(new Error("Object store couldn't be created."));var t=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=t.objectStore(this.storeName);var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(!t)return r=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(e),this.hasIndex(t)){var o=this.store.index(t);this.indexComplies(o,e)||(r=!0,this.onError(new Error('Cannot modify index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n.splice(n.indexOf(t),1)}else r=!0,this.onError(new Error('Cannot create new index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),n.length&&(r=!0,this.onError(new Error('Cannot delete index(es) "'+n.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),r||this.onStoreReady()}}.bind(this),e.onupgradeneeded=function(e){if(this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=e.target.transaction.objectStore(this.storeName);else{var t={autoIncrement:this.autoIncrement};null!==this.keyPath&&(t.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,t)}var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(t||(r=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(t)){var o=this.store.index(t);this.indexComplies(o,e)||(this.store.deleteIndex(t),this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),n.splice(n.indexOf(t),1)}else this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})},this),n.length&&n.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(e,t){if(this.idb.deleteDatabase){this.db.close();var r=this.idb.deleteDatabase(this.dbName);r.onsuccess=e,r.onerror=t}else t(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(e,t,o,i){null!==this.keyPath&&(i=o,o=t,t=e),i||(i=r),o||(o=n);var s,a=!1,u=null,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);return c.oncomplete=function(){(a?o:i)(u)},c.onabort=i,c.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(t),s=c.objectStore(this.storeName).put(t)):s=c.objectStore(this.storeName).put(t,e),s.onsuccess=function(e){a=!0,u=e.target.result},s.onerror=i,c},get:function(e,t,o){o||(o=r),t||(t=n);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(i?t:o)(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).get(e);return u.onsuccess=function(e){i=!0,s=e.target.result},u.onerror=o,a},remove:function(e,t,o){o||(o=r),t||(t=n);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){(i?t:o)(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).delete(e);return u.onsuccess=function(e){i=!0,s=e.target.result},u.onerror=o,a},batch:function(e,t,o){if(o||(o=r),t||(t=n),"[object Array]"!=Object.prototype.toString.call(e))o(new Error("dataArray argument must be of type Array."));else if(0===e.length)return t(!0);var i=e.length,s=!1,a=!1,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);u.oncomplete=function(){(a?t:o)(a)},u.onabort=o,u.onerror=o;var c=function(){0!==--i||s||(s=!0,a=!0)};return e.forEach(function(e){var t=e.type,r=e.key,n=e.value,i=function(e){u.abort(),s||(s=!0,o(e,t,r))};if("remove"==t){var a=u.objectStore(this.storeName).delete(r);a.onsuccess=c,a.onerror=i}else if("put"==t){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(n),l=u.objectStore(this.storeName).put(n)):l=u.objectStore(this.storeName).put(n,r),l.onsuccess=c,l.onerror=i}},this),u},putBatch:function(e,t,r){var n=e.map(function(e){return{type:"put",value:e}});return this.batch(n,t,r)},upsertBatch:function(e,t,o,i){"function"==typeof t&&(o=t,i=o,t={}),i||(i=r),o||(o=n),t||(t={}),"[object Array]"!=Object.prototype.toString.call(e)&&i(new Error("dataArray argument must be of type Array."));var s=t.keyField||this.keyPath,a=e.length,u=!1,c=!1,l=0,f=this.db.transaction([this.storeName],this.consts.READ_WRITE);f.oncomplete=function(){c?o(e):i(!1)},f.onabort=i,f.onerror=i;var h=function(t){e[l++][s]=t.target.result,0!==--a||u||(u=!0,c=!0)};return e.forEach(function(e){var t,r=e.key,n=function(e){f.abort(),u||(u=!0,i(e))};null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=f.objectStore(this.storeName).put(e)):t=f.objectStore(this.storeName).put(e,r),t.onsuccess=h,t.onerror=n},this),f},removeBatch:function(e,t,r){var n=e.map(function(e){return{type:"remove",key:e}});return this.batch(n,t,r)},getBatch:function(e,t,o,i){if(o||(o=r),t||(t=n),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(e))o(new Error("keyArray argument must be of type Array."));else if(0===e.length)return t([]);var s=[],a=e.length,u=!1,c=!1,l=null,f=this.db.transaction([this.storeName],this.consts.READ_ONLY);f.oncomplete=function(){(c?t:o)(l)},f.onabort=o,f.onerror=o;var h=function(e){e.target.result||"dense"==i?s.push(e.target.result):"sparse"==i&&s.length++,0===--a&&(u=!0,c=!0,l=s)};return e.forEach(function(e){var t=function(e){u=!0,l=e,o(e),f.abort()},r=f.objectStore(this.storeName).get(e);r.onsuccess=h,r.onerror=t},this),f},getAll:function(e,t){t||(t=r),e||(e=n);var o=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=o.objectStore(this.storeName);return i.getAll?this._getAllNative(o,i,e,t):this._getAllCursor(o,i,e,t),o},_getAllNative:function(e,t,r,n){var o=!1,i=null;e.oncomplete=function(){(o?r:n)(i)},e.onabort=n,e.onerror=n;var s=t.getAll();s.onsuccess=function(e){o=!0,i=e.target.result},s.onerror=n},_getAllCursor:function(e,t,r,n){var o=[],i=!1,s=null;e.oncomplete=function(){(i?r:n)(s)},e.onabort=n,e.onerror=n;var a=t.openCursor();a.onsuccess=function(e){var t=e.target.result;t?(o.push(t.value),t.continue()):(i=!0,s=o)},a.onError=n},clear:function(e,t){t||(t=r),e||(e=n);var o=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){(o?e:t)(i)},s.onabort=t,s.onerror=t;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(e){o=!0,i=e.target.result},a.onerror=t,s},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){return["keyPath","unique","multiEntry"].every(function(r){if("multiEntry"==r&&void 0===e[r]&&!1===t[r])return!0;if("keyPath"==r&&"[object Array]"==Object.prototype.toString.call(t[r])){var n=t.keyPath,o=e.keyPath;if("string"==typeof o)return n.toString()==o;if("function"!=typeof o.contains&&"function"!=typeof o.indexOf)return!1;if(o.length!==n.length)return!1;for(var i=0,s=n.length;i<s;i++)if(!(o.contains&&o.contains(n[i])||o.indexOf(-1!==n[i])))return!1;return!0}return t[r]==e[r]})},iterate:function(t,n){n=e({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:r,limit:1/0,offset:0,allowItemRejection:!1},n||{});var o="desc"==n.order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(o+="_NO_DUPLICATE");var i=!1,s=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),a=s.objectStore(this.storeName);n.index&&(a=a.index(n.index));var u=0;s.oncomplete=function(){if(!i)return void n.onError(null);n.onEnd?n.onEnd():t(null)},s.onabort=n.onError,s.onerror=n.onError;var c=a.openCursor(n.keyRange,this.consts[o]);return c.onerror=n.onError,c.onsuccess=function(e){var r=e.target.result;if(r)if(n.offset)r.advance(n.offset),n.offset=0;else{var o=t(r.value,r,s);n.allowItemRejection&&!1===o||u++,n.autoContinue&&(u+n.offset<n.limit?r.continue():i=!0)}else i=!0},s},query:function(e,t){var r=[],n=0;return t=t||{},t.autoContinue=!0,t.writeAccess=!1,t.allowItemRejection=!!t.filter,t.onEnd=function(){e(r,n)},this.iterate(function(e){n++;var o=!t.filter||t.filter(e);return!1!==o&&r.push(e),o},t)},count:function(t,n){n=e({index:null,keyRange:null},n||{});var o=n.onError||r,i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(i?t:o)(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName);n.index&&(u=u.index(n.index));var c=u.count(n.keyRange);return c.onsuccess=function(e){i=!0,s=e.target.result},c.onError=o,a},makeKeyRange:function(e){var t,r=void 0!==e.lower,n=void 0!==e.upper,o=void 0!==e.only;switch(!0){case o:t=this.keyRange.only(e.only);break;case r&&n:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case r:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case n:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},a={};return i.prototype=s,i.version=s.version,i})},,,,function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};!function(){function e(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise(e.bind.apply(e,[h].concat(r)))}}function t(e){return[e,function(t){return e({error:t.message})}]}function i(e){return self.registration.sync.register(e.id)}function s(t){return e(h.put)(t).then(null,function(e){if(!/key already exists/.test(e.message))throw e})}function a(t){t.waitUntil(e(h.get)(t.tag).then(function(e){if(!e)return t.registration&&t.registration.unregister(),void h.remove(t.tag);var r=e.id,n=Date.now();return fetch(l.deserialise(e.request)).then(f).then(function(t){var i=o({},e,{response:t,syncedOn:n});d.send("SYNC_RESULT",{id:r,syncedOn:n,response:t}),i.name?h.put(i):h.remove(r)})}))}var u=r(3),c=r(14),l=r(4),f=r(5),h=new c({dbVersion:1,keyPath:"id",storePrefix:"fetchSyncs/",storeName:"syncs"}),d=u.worker({GET_SYNCS:function(r,o){var i;(i=e(h.getAll)()).then.apply(i,n(t(o)))},REGISTER_SYNC:function(e,r){var o;(o=i(e).then(function(){return s(e)})).then.apply(o,n(t(r)))},CANCEL_SYNC:function(r,o){var i;(i=e(h.remove)(r)).then.apply(i,n(t(o)))},CANCEL_ALL_SYNCS:function(r,o){var i;(i=e(h.getAll)().then(function(e){return e.map(function(e){return e.id})}).then(function(t){return e(h.removeBatch)(t)})).then.apply(i,n(t(o)))}});self.addEventListener("sync",a),self.addEventListener("activate",function(e){return e.waitUntil(self.clients.claim())}),self.addEventListener("install",function(e){return e.waitUntil(self.skipWaiting())})}()}])});